syntax = "proto3";
package core.bridge;


// this line is used by starport scaffolding # proto/tx/import
import "cosmos/msg/v1/msg.proto";
import "bridge/models/transaction.proto";
import "bridge/models/token.proto";
import "bridge/models/chain.proto";
import "bridge/models/party.proto";
import "bridge/models/referrals.proto";
import "bridge/models/epoch.proto";

import "gogoproto/gogo.proto";
import "cosmos_proto/cosmos.proto";

option go_package = "github.com/Bridgeless-Project/bridgeless-core/v12/x/bridge/types";

// Msg defines the Msg service.
service Msg {
    // this line is used by starport scaffolding # proto/tx/rpc
    rpc SubmitTransactions(MsgSubmitTransactions) returns (MsgSubmitTransactionsResponse);
    rpc RemoveTransaction(MsgRemoveTransaction) returns (MsgRemoveTransactionResponse);
    rpc UpdateTransaction(MsgUpdateTransaction) returns (MsgUpdateTransactionResponse);

    rpc InsertChain(MsgInsertChain) returns (MsgInsertChainResponse);
    rpc DeleteChain(MsgDeleteChain) returns (MsgDeleteChainResponse);

    rpc InsertToken(MsgInsertToken) returns (MsgInsertTokenResponse);
    rpc UpdateToken(MsgUpdateToken) returns (MsgUpdateTokenResponse);
    rpc DeleteToken(MsgDeleteToken) returns (MsgDeleteTokenResponse);

    rpc AddTokenInfo(MsgAddTokenInfo) returns (MsgAddTokenInfoResponse);
    rpc RemoveTokenInfo(MsgRemoveTokenInfo) returns (MsgRemoveTokenInfoResponse);

    rpc SetParties(MsgSetParties) returns (MsgSetPartiesResponse);
    rpc SetTssThreshold(MsgSetTssThreshold) returns (MsgSetTssThresholdResponse);

    rpc SetReferral(MsgSetReferral) returns (MsgSetReferralResponse);
    rpc RemoveReferral(MsgRemoveReferral) returns (MsgRemoveReferralResponse);

    rpc SetReferralRewards(MsgSetReferralRewards) returns (MsgSetReferralRewardsResponse);
    rpc RemoveReferralRewards(MsgRemoveReferralRewards) returns (MsgRemoveReferralRewardsResponse);

    rpc AddTxToStopList(MsgAddTxToStopList) returns (MsgAddTxToStopListResponse);
    rpc RemoveTxFromStopList(MsgRemoveTxFromStopList) returns (MsgRemoveTxFromStopListResponse);

    rpc StartEpoch(MsgStartEpoch) returns (MsgStartEpochResponse);
    rpc SetEpochSignature(MsgSetEpochSignature) returns (MsgSetEpochSignatureResponse);
    rpc SetEpochPubKey(MsgSetEpochPubKey) returns (MsgSetEpochPubKeyResponse);
}

// this line is used by starport scaffolding # proto/tx/message
message MsgSubmitTransactions {
  option (cosmos.msg.v1.signer) = "submitter";

  string submitter = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  repeated core.bridge.Transaction transactions = 2 [(gogoproto.nullable) = false];
}

message MsgRemoveTransaction{
  string creator = 1;

  string deposit_chain_id = 2;
  string deposit_tx_hash = 3;
  uint64 deposit_tx_index = 4;
}

message MsgRemoveTransactionResponse {}

message MsgUpdateTransaction {
  option (cosmos.msg.v1.signer) = "submitter";

  string submitter = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  core.bridge.Transaction transaction = 2 [(gogoproto.nullable) = false];
}


message MsgUpdateTransactionResponse {}

// Tokens

message MsgSubmitTransactionsResponse {}

message MsgInsertToken {
  string creator = 1;
  Token token  = 2 [(gogoproto.nullable) = false];
}

message MsgInsertTokenResponse {}

message MsgUpdateToken {
  string creator = 1;
  uint64 token_id = 2;
  TokenMetadata metadata = 3 [(gogoproto.nullable) = false];
}

message MsgUpdateTokenResponse {}

message MsgDeleteToken {
  string creator = 1;
  uint64 token_id = 2;
}

message MsgDeleteTokenResponse {}

// Chains

message MsgInsertChain {
  string creator = 1;
  Chain chain  = 2 [(gogoproto.nullable) = false];
}

message MsgInsertChainResponse {}

message MsgDeleteChain {
  string creator = 1;
  string chain_id = 2;
}

message MsgDeleteChainResponse {}

// TokenInfo

message MsgAddTokenInfo {
  string creator = 1;
  TokenInfo info = 3 [(gogoproto.nullable) = false];
}

message MsgAddTokenInfoResponse {}

message MsgRemoveTokenInfo {
  string creator = 1;
  uint64 token_id = 2;
  string chain_id = 3;
}

message MsgRemoveTokenInfoResponse {}

// Signers list

message MsgSetParties {
  string creator =1;
  repeated Party parties = 2;
}

message MsgSetPartiesResponse {}

message MsgSetTssThreshold {
  string creator = 1;
  uint32 threshold = 2;
}

message MsgSetTssThresholdResponse {}


message MsgSetReferral {
  string creator = 1;
  Referral referral = 2 [(gogoproto.nullable) = false];
}

message MsgSetReferralResponse {}

message MsgRemoveReferral {
  string creator = 1;
  uint32 id = 2;
}

message MsgRemoveReferralResponse {}

message MsgSetReferralRewards {
  string creator = 1;
  ReferralRewards rewards = 4 [(gogoproto.nullable) = false];
}

message MsgSetReferralRewardsResponse {}

message MsgRemoveReferralRewards {
  string creator = 1;
  uint32 referrer_id = 2;
  uint64 token_id = 3;
}

message MsgRemoveReferralRewardsResponse {}

message MsgAddTxToStopList {
  Transaction transaction = 1;
  string  creator = 2;
}

message MsgAddTxToStopListResponse {}

message MsgRemoveTxFromStopList {
  string chain_id = 1;
  string tx_hash = 2;
  uint64 tx_nonce = 3;
  string creator = 4;
}

message MsgRemoveTxFromStopListResponse {}


message MsgStartEpoch {
  option (cosmos.msg.v1.signer) = "creator";

  string creator = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  uint32 epoch_id = 2;
  repeated TSSInfo info = 3 [(gogoproto.nullable) = false];
  uint32 tss_threshold = 4;
}

message MsgStartEpochResponse {}

message MsgSetEpochSignature {
  option (cosmos.msg.v1.signer) = "creator";

  string creator = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  uint32 epoch_id = 2;
  repeated EpochChainSignatures epoch_chain_signatures = 3 [(gogoproto.nullable) = false];
  repeated EpochBridgeAddress addresses = 4 [(gogoproto.nullable) = false];
}

message MsgSetEpochSignatureResponse {}

message MsgSetEpochPubKey {
  option (cosmos.msg.v1.signer) = "creator";

  string creator = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string pubkey = 2;
  uint32 epoch_id = 3;
}

message MsgSetEpochPubKeyResponse {}
